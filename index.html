
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Django Vector Database - Adds fast vector search app any Django project">
      
      
      
        <link rel="canonical" href="https://github.com/pkavumba/django-vectordb/">
      
      
      
        <link rel="next" href="tutorial/quickstart/">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.9">
    
    
      
        <title>Django Vector Database</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.85bb2934.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#django-vectordb" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Django Vector Database" class="md-header__button md-logo" aria-label="Django Vector Database" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Django Vector Database
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pkavumba/django-vectordb" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Django Vector Database" class="md-nav__button md-logo" aria-label="Django Vector Database" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Django Vector Database
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pkavumba/django-vectordb" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        Home
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
    <nav class="md-nav" aria-label="Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-importing" class="md-nav__link">
    1. Importing
  </a>
  
    <nav class="md-nav" aria-label="1. Importing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-import-the-simple-proxy-recommended" class="md-nav__link">
    Option 1: Import the simple proxy [Recommended]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-import-the-vector-model-directly" class="md-nav__link">
    Option 2: Import the Vector model directly
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populating-the-vector-database" class="md-nav__link">
    Populating the Vector Database
  </a>
  
    <nav class="md-nav" aria-label="Populating the Vector Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manually-adding-items-to-the-vector-database" class="md-nav__link">
    Manually adding items to the vector database
  </a>
  
    <nav class="md-nav" aria-label="Manually adding items to the vector database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-adding-model-instances" class="md-nav__link">
    1. Adding Model Instances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-adding-text-to-the-model" class="md-nav__link">
    2. Adding Text to the Model
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatically-syncing-your-model-to-the-vector-database" class="md-nav__link">
    Automatically Syncing Your Model to the vector database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#searching" class="md-nav__link">
    Searching
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtering" class="md-nav__link">
    Filtering
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings" class="md-nav__link">
    Settings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    Quickstart
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development" class="md-nav__link">
    Development
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tutorial/quickstart/" class="md-nav__link">
        Quickstart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tutorial/1-project-setup/" class="md-nav__link">
        1 - Project Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tutorial/2-adding-vector-search/" class="md-nav__link">
        2 - Adding Vector Search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tutorial/3-manually-updating-vector-database/" class="md-nav__link">
        3 - Manually Updating Vector Database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tutorial/4-manually-updating-vector-database/" class="md-nav__link">
        4 - Manually Updating Vector Database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tutorial/5-automatic-syncing/" class="md-nav__link">
        5 - Automatically Syncing Our Models to Vector Database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tutorial/6-vector-search/" class="md-nav__link">
        6 - Vector Searching
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tutorial/7-adding-api-endpoint/" class="md-nav__link">
        7 - Adding a Vector Search Endpoint
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
    <nav class="md-nav" aria-label="Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-importing" class="md-nav__link">
    1. Importing
  </a>
  
    <nav class="md-nav" aria-label="1. Importing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-import-the-simple-proxy-recommended" class="md-nav__link">
    Option 1: Import the simple proxy [Recommended]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-import-the-vector-model-directly" class="md-nav__link">
    Option 2: Import the Vector model directly
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populating-the-vector-database" class="md-nav__link">
    Populating the Vector Database
  </a>
  
    <nav class="md-nav" aria-label="Populating the Vector Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manually-adding-items-to-the-vector-database" class="md-nav__link">
    Manually adding items to the vector database
  </a>
  
    <nav class="md-nav" aria-label="Manually adding items to the vector database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-adding-model-instances" class="md-nav__link">
    1. Adding Model Instances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-adding-text-to-the-model" class="md-nav__link">
    2. Adding Text to the Model
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatically-syncing-your-model-to-the-vector-database" class="md-nav__link">
    Automatically Syncing Your Model to the vector database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#searching" class="md-nav__link">
    Searching
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtering" class="md-nav__link">
    Filtering
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings" class="md-nav__link">
    Settings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    Quickstart
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development" class="md-nav__link">
    Development
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="django-vectordb"><a class="toclink" href="#django-vectordb">Django VectorDB</a></h1>
<hr />
<p>Django Vector DB is a powerful and flexible toolkit for adding vector search capabilities to your Django applications. It is built on top of lightening fast nearest neighbor search library: hnswlib.</p>
<p>Some reasons you might want to use Django Vector DB:</p>
<ul>
<li>Low latency, because you don't need to call an external API.</li>
<li>Scalable to a billion vectors with millisecond search results.</li>
<li>Fast and accurate search.</li>
<li>Native Django integration.</li>
<li>Metadata filtering with the full power of the django queryset queries, e.g. <code>vectordb.filter(metadata__user_id=1).search("some text").only("text")</code></li>
<li>Automatic syncing between your models and the vector index, simply register the provided signals and you can continue about your day. Vectordb will sync the vector database whenever you create, update or delete an instance.</li>
<li>Out of the box support for incremental updates, allowing you to add or update data without rebuilding the entire index.</li>
<li>Extensive documentation and support for easy implementation and troubleshooting.</li>
</ul>
<h2 id="requirements"><a class="toclink" href="#requirements">Requirements</a></h2>
<hr />
<p>Django VectorDB requires the following:</p>
<ul>
<li><a href="https://www.python.org">Python</a> (3.6, 3.7, 3.8, 3.9, 3.10, 3.11)</li>
<li><a href="https://www.djangoproject.com">Django</a> (2.2, 3.0, 3.1, 3.2, 4.0, 4.1, 4.2)</li>
<li><a href="https://github.com/nmslib/hnswlib">HNSWLib</a> (0.7.0)</li>
<li><a href="https://numpy.org">numpy</a></li>
</ul>
<p>We <strong>highly recommend</strong> and only officially support the latest patch release of
each Python and Django series.</p>
<p>The following packages are optional:</p>
<ul>
<li><a href="https://www.sbert.net">Sentence-Transformers</a> - Add support for converting text into vector embeddings used for similarity search</li>
<li><a href="https://www.django-rest-framework.org">Django Rest Framework</a> - Add API endpoint for VectorDB.</li>
<li><a href="https://pypi.org/project/django-filter/">django-filters</a> - Add metadata filtering support on the API endpoint.</li>
</ul>
<hr />
<h2 id="installation"><a class="toclink" href="#installation">Installation</a></h2>
<p>Install using <code>pip</code>, it is recommended that you install the optional packages with:</p>
<pre><code class="language-bash">    pip install &quot;django-vectordb[standard]&quot; # This will install the optional dependencies above.
</code></pre>
<p>If you dont want to install the optional packages you can run:</p>
<pre><code class="language-bash">    pip install django-vectordb
</code></pre>
<p>Add <code>'django-vectordb'</code> to your <code>INSTALLED_APPS</code> setting.</p>
<pre><code class="language-python">    INSTALLED_APPS = [
        ...
        'vectordb',
    ]
</code></pre>
<p>Run the migrations to create the <code>vectordb</code> table</p>
<pre><code class="language-bash">$ ./manage.py migrate
</code></pre>
<p>If you're intending to use the API, you'll probably also want to add vectordb.urls. Add the following to your root <code>urls.py</code> file.</p>
<pre><code class="language-python">    urlpatterns = [
        ...
        path('api/', include('vectordb.urls'))
    ]
</code></pre>
<p>Note: that the URL path can be whatever you want.</p>
<p>This will expose endpoints for all CRUD actions (<code>/api/vectordb/</code>) and searching (<code>/api/vectordb/search/</code>).</p>
<hr />
<h2 id="example"><a class="toclink" href="#example">Example</a></h2>
<p>Lets beging with a simple example for blog posts</p>
<pre><code class="language-python">
from django.db import models
User = get_user_model() #import get_user_model first

class Post(models.Model):
    title = models.CharField(max_length=100)
    description = models.TextField()
    user = models.ForeignKey(User, on_delete = models.CASCADE)

    def __str__(self):
        return self.title
</code></pre>
<h3 id="1-importing"><a class="toclink" href="#1-importing">1. Importing</a></h3>
<p>To begin working with VectorDB, you'll first need to import it into your project. There are two ways to do this, depending on whether you'd like to use the simple proxy to the vector models manager, <code>Vector.objects</code>, or the Vector model directly.</p>
<h4 id="option-1-import-the-simple-proxy-recommended"><a class="toclink" href="#option-1-import-the-simple-proxy-recommended">Option 1: Import the simple proxy [Recommended]</a></h4>
<pre><code class="language-python">from vectordb import vectordb
</code></pre>
<h4 id="option-2-import-the-vector-model-directly"><a class="toclink" href="#option-2-import-the-vector-model-directly">Option 2: Import the Vector model directly</a></h4>
<pre><code class="language-python">from vectordb import get_vectordb_model

VectorModel = get_vectordb_model()
</code></pre>
<p>With either of these imports, you'll have access to all the Django manager functions available on the object. Note that you can run the commands detailed below using <code>vectordb</code> or <code>VectorModel.objects</code>, whichever you've chosen to import. For the rest of this guide we will use <code>vectordb</code>.</p>
<p>Now that you've imported VectorDB, it's time to dive in and explore its powerful features!</p>
<h3 id="populating-the-vector-database"><a class="toclink" href="#populating-the-vector-database">Populating the Vector Database</a></h3>
<p>First, let's make a few updates to the model to allow VectorDB to handle most tasks for us: add <code>get_vectordb_text</code> and <code>get_vectordb_metadata</code> methods.</p>
<pre><code class="language-python">from django.db import models
User = get_user_model()

class Post(models.Model):
    title = models.CharField(max_length=100)
    description = models.TextField()
    user = models.ForeignKey(User, on_delete=models.CASCADE)

    def __str__(self):
        return self.title

    def get_vectordb_text(self):
        # Use title and description for vector search
        return f&quot;{self.title} -- {self.description}&quot;

    def get_vectordb_metadata(self):
        # Enable filtering by any of these metadata
        return {&quot;title&quot;: self.title, &quot;description&quot;: self.description, &quot;user_id&quot;: self.user.id, &quot;model&quot;: &quot;post&quot;}
</code></pre>
<p>In an existing project, you can run the <code>vectordb_sync</code> management command to add all items to the database.</p>
<pre><code class="language-bash">./manage.py vectordb_sync &lt;app_name&gt; &lt;model_name&gt;
</code></pre>
<p>For this example:</p>
<pre><code class="language-bash">./manage.py vectordb_sync blog Post
</code></pre>
<h4 id="manually-adding-items-to-the-vector-database"><a class="toclink" href="#manually-adding-items-to-the-vector-database">Manually adding items to the vector database</a></h4>
<p>VectorDB provides two utility methods for adding items to the database: <code>vectordb.add_instance</code> or <code>vectordb.add_text</code>. Note that for adding the instance, you need to provide the <code>get_vectordb_text</code> and an optional <code>get_vectordb_metadata</code> methods.</p>
<h5 id="1-adding-model-instances"><a class="toclink" href="#1-adding-model-instances">1. Adding Model Instances</a></h5>
<pre><code class="language-python">post1 = models.create(title=&quot;post1&quot;, description=&quot;post1 description&quot;, user=user1) # provide valid user

# add to vector database
vectordb.add_instance(post1)
</code></pre>
<h5 id="2-adding-text-to-the-model"><a class="toclink" href="#2-adding-text-to-the-model">2. Adding Text to the Model</a></h5>
<p>To add text to the database, you can use <code>vectordb.add_text()</code>:</p>
<pre><code class="language-python">vectordb.add_text(text=&quot;Hello text&quot;, id=3, metadata={&quot;user_id&quot;: 1})
</code></pre>
<p>The <code>text</code> and <code>id</code> are required. Additionally, the <code>id</code> must be unique, or an error will occur. <code>metadata</code> can be <code>None</code> or any valid JSON.</p>
<h3 id="automatically-syncing-your-model-to-the-vector-database"><a class="toclink" href="#automatically-syncing-your-model-to-the-vector-database">Automatically Syncing Your Model to the vector database</a></h3>
<p>To enable auto sync, import the following signals and register them with your models:</p>
<pre><code class="language-python"># signals.py
from django.db.models.signals import post_save, post_delete

from vectordb.sync_signals import (
    sync_vectordb_on_create_update,
    sync_vectordb_on_delete,
)

from .models import Post

post_save.connect(
    sync_vectordb_on_create_update,
    sender=Post,
    dispatch_uid=&quot;update_vector_index_super_unique_id&quot;,
)

post_delete.connect(
    sync_vectordb_on_delete,
    sender=Post,
    dispatch_uid=&quot;delete_vector_index_super_unique_id&quot;,
)
</code></pre>
<p>Then import the signals in your <code>apps.py</code></p>
<pre><code class="language-python">from django.apps import AppConfig


class BlogConfig(AppConfig):
    default_auto_field = &quot;django.db.models.BigAutoField&quot;
    name = &quot;blog&quot;

    def ready(self):
        import blog.signals
</code></pre>
<p>These signals will sync the vectors when you create and delete instances. Note that signals are not called in bulk create, so you will need to sync manually when using those methods.</p>
<p>Ensure that your models implement the <code>get_vectordb_text()</code> and/or <code>get_vectordb_metadata()</code> methods for proper syncing.</p>
<h3 id="searching"><a class="toclink" href="#searching">Searching</a></h3>
<p>To search, simply call <code>vectordb.search()</code>:</p>
<pre><code class="language-python">vectordb.search(&quot;Some text&quot;, k=10) # k is the maximum number of results you want.
</code></pre>
<p>Note: search method returns a query whose results are order from best match. Each item will have the following fields: <code>id</code>, <code>content_object</code>, <code>object_id</code>, <code>content_type</code>, <code>text</code>, <code>embedding</code>, annotated <code>score</code>, and a property <code>vector</code> that returns the <code>np.ndarray</code> representation of the item. Because search gives us a <code>QuerySet</code> we can choose the fiels we want to see like sos:</p>
<pre><code class="language-python">vectordb.search(&quot;Some text&quot;, k=10).only('text', 'content_object')
</code></pre>
<p>Search doesn't only work for <code>text</code> you can also search for model instances:</p>
<pre><code class="language-python">post1 = Post.objects.get(id=1)
# Limit the search scope to a user with an id of 1
results = vectordb.search(post1, k=10)
</code></pre>
<p>This is also a way to get related posts to <code>post1</code>. Thus, you can use <code>vectordb</code> for recommendations as well.</p>
<p>Note: Seaching by model instances will automatically scope the results to instances of that type. For example, if you search by <code>post1</code> you will only get results that are instances of <code>Post</code>.</p>
<p>If <code>k</code> is not provided, the default value is 10.</p>
<h3 id="filtering"><a class="toclink" href="#filtering">Filtering</a></h3>
<p>You can filter on <code>text</code> or <code>metadata</code> with the full power of Django QuerySet filtering:</p>
<pre><code class="language-python"># scope the search to user with an id 1
vectordb.filter(metadata__user_id=1).search(&quot;Some text&quot;, k=10)

# example two with more filters
vectordb.filter(text__icontains=&quot;Apple&quot;, metadata__title__icontains=&quot;IPhone&quot;, metadata__description__icontains=&quot;2023&quot;).search(&quot;Apple new phone&quot;, k=10)
</code></pre>
<p>We can also use model instances instead of text:</p>
<pre><code class="language-python">post1 = Post.objects.get(id=1)
# Limit the search scope to a user with an id of 1
results = vectordb.filter(metadata__user_id=1).search(post1, k=10)

# Scope the results to text which contains France, belonging to user with id 1 and created in 2023
vectordb.filter(text__icontains=&quot;Apple&quot;, metadata__title__icontains=&quot;IPhone&quot;, metadata__description__icontains=&quot;2023&quot;).search(post1, k=10)
</code></pre>
<p>Refer to the <a href="https://docs.djangoproject.com/en/4.2/topics/db/queries/">Django documentation</a> on querying the <code>JSONField</code> for more information on filtering.</p>
<hr />
<h2 id="settings"><a class="toclink" href="#settings">Settings</a></h2>
<p>You can customize <code>vectordb</code> by providing your settings in the <code>settings.py</code> file of your project. The following settings are available:</p>
<pre><code class="language-python">    # settings.py
    DJANGO_VECTOR_DB = {
        &quot;DEFAULT_EMBEDDING_CLASS&quot;: ..., # Default: &quot;vectordb.embedding_functions.SentenceTransformerEncoder&quot;,
        &quot;DEFAULT_EMBEDDING_MODEL&quot;: ..., # Default: &quot;all-MiniLM-L6-v2&quot;,
        # Can be &quot;cosine&quot; or &quot;l2&quot;
        &quot;DEFAULT_EMBEDDING_SPACE&quot;: ..., # Default &quot;l2&quot;
        &quot;DEFAULT_EMBEDDING_DIMENSION&quot;: ..., # Default is 384 for &quot;all-MiniLM-L6-v2&quot;
        &quot;DEFAULT_MAX_N_RESULTS&quot;: 10, # Number of results to return from search maximum is default is 10
        &quot;DEFAULT_MIN_SCORE&quot;: 0.0, # Minimum score to return from search default is 0.0
        &quot;DEFAULT_MAX_BRUTEFORCE_N&quot;: 10_000, # Maximum number of items to search using brute force default is 10_000. If the number of items is greater than this number, the search will be done using the HNSW index.
    }
</code></pre>
<hr />
<h2 id="quickstart"><a class="toclink" href="#quickstart">Quickstart</a></h2>
<p>Can't wait to get started? The <a href="tutorial/quickstart/">quickstart guide</a> is the fastest way to get up and running, and building APIs with REST framework.</p>
<hr />
<h2 id="development"><a class="toclink" href="#development">Development</a></h2>
<p>Clone the repository</p>
<pre><code class="language-bash">$ git clone
</code></pre>
<p>Install the app in editable mode with all dev dependencies:</p>
<pre><code class="language-bash">pip install -e .[dev]
</code></pre>
<p>This command will install the app and its dev dependencies specified in the <code>setup.cfg</code> file. The <code>-e</code> flag installs the package in editable mode, which means that any changes you make to the app's source code will be reflected immediately without needing to reinstall the package. The <code>[dev]</code> part tells <code>pip</code> to install the dependencies listed under the "dev" section in the <code>options.extras_require</code> of the <code>setup.cfg</code> file.</p>
<p>Run tests</p>
<pre><code class="language-bash">pytest
</code></pre>
<p>Or</p>
<pre><code class="language-bash">tox
</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.fac441b0.min.js"></script>
      
    
  </body>
</html>